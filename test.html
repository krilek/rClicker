<html>

<head>
    <meta charset="UTF-8" />
    <style>
    body {
        background-color: #303030;
        margin: 0px;
    }
    
    ::before {
        font-size: 80px !important;
    }
    
    #box {
        position: absolute;
        width: 50px;
        height: 50px;
        background-color: green;
        overflow: scroll;
    }
    </style>
    <link rel="stylesheet" type="text/css" href="font/flaticon.css">
</head>

<body id="body">
    <button onclick="timex = setInterval(function () {moveObject(2000, 5, 'syringe', document.getElementById('body'));},1000)"> Stworz </button>
    <script type="text/javascript">
    Number.prototype.round = function(place) {
        return +(Math.round(this + "e+" + place) + "e-" + place);
    }

    function colorGenerator() {
        var signArray = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];
        var output = "#";
        while (output.length != 7) {
            var rand = Math.floor(Math.random() * 16);
            output += signArray[rand];
        }
        return output;
    }

    function degreeGenerator() {
        var random = Math.floor(Math.random() * 180);
        random += 'deg';
        return random;
    }

    function moveObject(duration, amount, what, parent) {

        var amountOfSteps = duration / 10;
        var arrayOfElements = [];
        amount = amount || 1;
        for (i = 0; i < amount; i++) {
            arrayOfElements.push(new element(parent, what, colorGenerator(), 50, degreeGenerator(), 0, 200));
            arrayOfElements[i].elHandle();

        }

        function element(parent, img, col, marg, rot, offX, offY, X, Y, eX, eY) {
            this.parentContainer = parent;
            this.offsetX = offX || 0;
            this.offsetY = offY || 0;
            this.margin = marg || 1;
            this.elImg = img;
            this.timer;
            this.elToMove;
            this.startX = X;
            this.startY = Y || 1;
            this.endX = eX || 1;
            this.endY = eY || 1;
            this.rotation = rot;
            this.color = col;
            this.distanceX;
            this.distanceY;
            this.stepX;
            this.stepY;
            this.outOf = window.onblur;
            this.amountOfFrames = amountOfSteps;
            var selff = this;

            this.randomPos = function() {
                var divWidth = this.parentContainer.clientWidth;
                var divHeight = this.parentContainer.clientHeight;
                //choose which to generate first: below 10 start generating x first, above 10 y first
                var mode = Math.floor(Math.random() * 20);
                if (mode < 10) {
                    this.startX = Math.floor(Math.random() * divWidth);
                    if (this.startX <= this.margin || this.startX >= divWidth - this.margin) {
                        this.startY = Math.floor(Math.random() * divHeight);
                    } else if (this.startX >= this.margin && this.startX <= divWidth - this.margin) {
                        do {
                            this.startY = Math.floor(Math.random() * divHeight);
                        } while (this.startY >= this.margin && this.startY <= divHeight - this.margin);
                    }
                } else {
                    this.startY = Math.floor(Math.random() * divHeight);
                    if (this.startY <= this.margin || this.startY >= divHeight - this.margin) {
                        this.startX = Math.floor(Math.random() * divWidth);
                    } else if (this.startY >= this.margin && this.startY <= divHeight - this.margin) {
                        do {
                            this.startX = Math.floor(Math.random() * divWidth);
                        } while (this.startX >= this.margin && this.startX <= divWidth - this.margin);
                    }
                }
                this.endX = divWidth - this.startX;
                this.endY = divHeight - this.startY;
            }
            this.imgTranslate = function() {
                var choose = Math.floor(Math.random() * 2);
                switch (this.elImg) {
                    case "salvia":
                        {
                            this.elImg = choose == 1 ? "flaticon-plant-on-ground" : "flaticon-holly-xmas-symbol-of-branch-with-leaves-and-fruits";
                            break;
                        }
                    case "acodin":
                        {
                            this.elImg = choose == 1 ? "flaticon-drug-pills" : "flaticon-aspirins";
                            break;
                        }
                    case "booster":
                        {
                            this.elImg = choose == 1 ? "flaticon-antibiotic" : "flaticon-antibiotic";
                            break;
                        }
                    case "weed":
                        {
                            this.elImg = choose == 1 ? "flaticon-cannabis-leaf" : "flaticon-cannabis-leaf";
                            break;
                        }
                    case "mushroom":
                        {
                            this.elImg = choose == 1 ? "flaticon-mushroom" : "flaticon-mushrooms";
                            break;
                        }
                    case "molly":
                        {
                            this.elImg = choose == 1 ? "flaticon-2-pills" : "flaticon-medicine-pill";
                            break;
                        }
                    case "powder":
                        {
                            this.elImg = choose == 1 ? "flaticon-drugs-1" : "flaticon-drugs";
                            break;
                        }
                    case "syringe":
                        {
                            this.elImg = choose == 1 ? "flaticon-syringe" : "flaticon-syringe-1";
                            break;
                        }
                }
                return this.elImg;
            }
            this.elHandle = function() {
                this.elToMove = document.createElement("div");
                this.elToMove.style.position = "absolute";
                this.elToMove.className = this.imgTranslate();
                if (!this.startX || !this.startY || !this.endX || !this.endY)
                    this.randomPos();
                this.distanceX = Math.abs(this.endX - this.startX);
                this.distanceY = Math.abs(this.endY - this.startY);
                this.stepX = this.distanceX / this.amountOfFrames;
                this.stepY = this.distanceY / this.amountOfFrames;
                this.startY -= this.offsetY;
                this.endY -= this.offsetY;
                this.startX -= this.offsetX;
                this.endX -= this.offsetX;
                this.elToMove.style.left = this.startX + "px";
                this.elToMove.style.top = this.startY + "px";
                this.elToMove.style.color = this.color;
                this.elToMove.style.transform = "rotate(" + this.rotation + ")";
                this.parentContainer.appendChild(this.elToMove);

                this.timer = setInterval(function() {
                    selff.frame()
                }, 10);
            }
            this.frame = function() {

                if (this.startX <= this.endX)
                    this.startX += this.stepX;
                else
                    this.startX -= this.stepX;
                if (this.startY <= this.endY)
                    this.startY += this.stepY;
                else
                    this.startY -= this.stepY;

                this.distanceX -= this.stepX;
                this.distanceY -= this.stepY;
                this.elToMove.style.left = this.startX + "px";
                this.elToMove.style.top = this.startY + "px";
                this.amountOfFrames--;
                if (this.distanceX <= 0 && this.distanceY <= 0) {
                    clearInterval(this.timer);
                    this.parentContainer.removeChild(this.elToMove);
                    //this.elHandle();
                    //delete this;
                    /* 
						CWELU MOŻE UŻYJESZ JAKIEJŚ FLAGI?!
						KTÓRA ZMUSI KOLEJNY OBIEKT DO WYSKOCZENIA!

	    			*/
                }
            }

        }

    }
    </script>
</body>

</html>
